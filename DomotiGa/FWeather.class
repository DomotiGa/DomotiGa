' Gambas class file

' Description:
' FWeather.class
' Placeholder for weather forecasts and weathermaps.

' Development Status:
' Not started yet, things to build are:
' Display of weather forecast, weather alarms, moon phase (image), earthquakes etc.
' RSS Feeds to parse for this info can be found on www.knmi.nl
' Inform user if items contains keyword(s) from favorites.

' DomotiGa - an open source home automation program.
' Copyright(C) 2008-2009 Ron Klinkien

' Read file called COPYING for license details.

PRIVATE hProcess AS Process

PUBLIC SUB Form_Open()

  DIM sCommand AS String

  sCommand = "wget -q http://www.sat24.com/image.ashx?country=nl"

  IF Exist(User.Home &/ "image.ashx?country=nl") THEN KILL User.Home &/ "image.ashx?country=nl"

  hProcess = SHELL sCommand FOR READ WRITE AS "hProcess"

END

PUBLIC SUB hProcess_Kill()

  IF Exist(User.Home &/ "image.ashx?country=nl") THEN
    mboxWeather.Enabled = TRUE
    mboxWeather.Visible = TRUE
    mboxWeather.Path = User.Home &/ "image.ashx?country=nl"
    mboxWeather.Playing = TRUE
  END IF

END
