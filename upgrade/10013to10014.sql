
--
-- Downgrade from InnoDB to MyISAM
--
ALTER TABLE actions ENGINE=MyISAM;
ALTER TABLE calendar ENGINE=MyISAM;
ALTER TABLE capture_camera0 ENGINE=MyISAM;
ALTER TABLE capture_camera1 ENGINE=MyISAM;
ALTER TABLE capture_camera2 ENGINE=MyISAM;
ALTER TABLE capture_camera3 ENGINE=MyISAM;
ALTER TABLE category ENGINE=MyISAM;
ALTER TABLE cdr ENGINE=MyISAM;
ALTER TABLE conditions ENGINE=MyISAM;
ALTER TABLE contacts ENGINE=MyISAM;
ALTER TABLE deviceblacklist ENGINE=MyISAM;
ALTER TABLE devices ENGINE=MyISAM;
ALTER TABLE devices_bwired ENGINE=MyISAM;
ALTER TABLE devices_camera ENGINE=MyISAM;
ALTER TABLE devices_pachube ENGINE=MyISAM;
ALTER TABLE devices_zwave ENGINE=MyISAM;
ALTER TABLE devicetypes ENGINE=MyISAM;
ALTER TABLE devicetypes_homematic ENGINE=MyISAM;
ALTER TABLE dictionary ENGINE=MyISAM;
ALTER TABLE events ENGINE=MyISAM;
ALTER TABLE events_actions ENGINE=MyISAM;
ALTER TABLE floors ENGINE=MyISAM;
ALTER TABLE gas_usage ENGINE=MyISAM;
ALTER TABLE globalvars ENGINE=MyISAM;
ALTER TABLE graph_data ENGINE=MyISAM;
ALTER TABLE graphs ENGINE=MyISAM;
ALTER TABLE groups ENGINE=MyISAM;
ALTER TABLE interfaces ENGINE=MyISAM;
ALTER TABLE locations ENGINE=MyISAM;
ALTER TABLE macros ENGINE=MyISAM;
ALTER TABLE markers ENGINE=MyISAM;
ALTER TABLE menu ENGINE=MyISAM;
ALTER TABLE menu_names ENGINE=MyISAM;
ALTER TABLE newsfeeds ENGINE=MyISAM;
ALTER TABLE notify ENGINE=MyISAM;
ALTER TABLE notifytypes ENGINE=MyISAM;
ALTER TABLE power_exported ENGINE=MyISAM;
ALTER TABLE power_usage ENGINE=MyISAM;
ALTER TABLE remarks_fullmoon ENGINE=MyISAM;
ALTER TABLE remarks_humid ENGINE=MyISAM;
ALTER TABLE remarks_personal ENGINE=MyISAM;
ALTER TABLE remarks_plants ENGINE=MyISAM;
ALTER TABLE remarks_tags ENGINE=MyISAM;
ALTER TABLE remarks_tempbelow5 ENGINE=MyISAM;
ALTER TABLE remarks_tempbelowmin5 ENGINE=MyISAM;
ALTER TABLE scenes ENGINE=MyISAM;
ALTER TABLE security ENGINE=MyISAM;
ALTER TABLE settings_asterisk ENGINE=MyISAM;
ALTER TABLE settings_astro ENGINE=MyISAM;
ALTER TABLE settings_bluetooth ENGINE=MyISAM;
ALTER TABLE settings_bwiredmap ENGINE=MyISAM;
ALTER TABLE settings_callerid ENGINE=MyISAM;
ALTER TABLE settings_ctx35 ENGINE=MyISAM;
ALTER TABLE settings_cul ENGINE=MyISAM;
ALTER TABLE settings_currentcost ENGINE=MyISAM;
ALTER TABLE settings_denon ENGINE=MyISAM;
ALTER TABLE settings_digitemp ENGINE=MyISAM;
ALTER TABLE settings_dmxplayer ENGINE=MyISAM;
ALTER TABLE settings_domotica ENGINE=MyISAM;
ALTER TABLE settings_dsc ENGINE=MyISAM;
ALTER TABLE settings_eib ENGINE=MyISAM;
ALTER TABLE settings_elvmax ENGINE=MyISAM;
ALTER TABLE settings_email ENGINE=MyISAM;
ALTER TABLE settings_ezcontrol ENGINE=MyISAM;
ALTER TABLE settings_fritzbox ENGINE=MyISAM;
ALTER TABLE settings_genericio ENGINE=MyISAM;
ALTER TABLE settings_gmail ENGINE=MyISAM;
ALTER TABLE settings_gps ENGINE=MyISAM;
ALTER TABLE settings_hddtemp ENGINE=MyISAM;
ALTER TABLE settings_homematic ENGINE=MyISAM;
ALTER TABLE settings_iport ENGINE=MyISAM;
ALTER TABLE settings_irman ENGINE=MyISAM;
ALTER TABLE settings_irtrans ENGINE=MyISAM;
ALTER TABLE settings_iviewer ENGINE=MyISAM;
ALTER TABLE settings_jeelabs ENGINE=MyISAM;
ALTER TABLE settings_jsonrpc ENGINE=MyISAM;
ALTER TABLE settings_k8055 ENGINE=MyISAM;
ALTER TABLE settings_kmtronicudp ENGINE=MyISAM;
ALTER TABLE settings_ledmatrix ENGINE=MyISAM;
ALTER TABLE settings_lgtv ENGINE=MyISAM;
ALTER TABLE settings_lirc ENGINE=MyISAM;
ALTER TABLE settings_main ENGINE=MyISAM;
ALTER TABLE settings_meteohub ENGINE=MyISAM;
ALTER TABLE settings_mochad ENGINE=MyISAM;
ALTER TABLE settings_mqtt ENGINE=MyISAM;
ALTER TABLE settings_ncid ENGINE=MyISAM;
ALTER TABLE settings_nma ENGINE=MyISAM;
ALTER TABLE settings_omniksol ENGINE=MyISAM;
ALTER TABLE settings_onkyo ENGINE=MyISAM;
ALTER TABLE settings_opentherm ENGINE=MyISAM;
ALTER TABLE settings_openzwave ENGINE=MyISAM;
ALTER TABLE settings_owfs ENGINE=MyISAM;
ALTER TABLE settings_oww ENGINE=MyISAM;
ALTER TABLE settings_p2000 ENGINE=MyISAM;
ALTER TABLE settings_pachube ENGINE=MyISAM;
ALTER TABLE settings_ping ENGINE=MyISAM;
ALTER TABLE settings_pioneer ENGINE=MyISAM;
ALTER TABLE settings_plcbus ENGINE=MyISAM;
ALTER TABLE settings_plugwise ENGINE=MyISAM;
ALTER TABLE settings_prowl ENGINE=MyISAM;
ALTER TABLE settings_pushover ENGINE=MyISAM;
ALTER TABLE settings_pvoutput ENGINE=MyISAM;
ALTER TABLE settings_pwrctrl ENGINE=MyISAM;
ALTER TABLE settings_razberry ENGINE=MyISAM;
ALTER TABLE settings_rfxcomrx ENGINE=MyISAM;
ALTER TABLE settings_rfxcomtrx ENGINE=MyISAM;
ALTER TABLE settings_rfxcomtx ENGINE=MyISAM;
ALTER TABLE settings_rfxcomxpl ENGINE=MyISAM;
ALTER TABLE settings_rrdtool ENGINE=MyISAM;
ALTER TABLE settings_serverstats ENGINE=MyISAM;
ALTER TABLE settings_sharptv ENGINE=MyISAM;
ALTER TABLE settings_shell ENGINE=MyISAM;
ALTER TABLE settings_smartmeter ENGINE=MyISAM;
ALTER TABLE settings_smartvisuserver ENGINE=MyISAM;
ALTER TABLE settings_sms ENGINE=MyISAM;
ALTER TABLE settings_sound ENGINE=MyISAM;
ALTER TABLE settings_squeezeserver ENGINE=MyISAM;
ALTER TABLE settings_telnetserver ENGINE=MyISAM;
ALTER TABLE settings_temp08 ENGINE=MyISAM;
ALTER TABLE settings_temperaturnu ENGINE=MyISAM;
ALTER TABLE settings_thermostat ENGINE=MyISAM;
ALTER TABLE settings_tvguide ENGINE=MyISAM;
ALTER TABLE settings_twitter ENGINE=MyISAM;
ALTER TABLE settings_ups ENGINE=MyISAM;
ALTER TABLE settings_videoserver ENGINE=MyISAM;
ALTER TABLE settings_visca ENGINE=MyISAM;
ALTER TABLE settings_visonic ENGINE=MyISAM;
ALTER TABLE settings_voicetext ENGINE=MyISAM;
ALTER TABLE settings_weatherbug ENGINE=MyISAM;
ALTER TABLE settings_weatherug ENGINE=MyISAM;
ALTER TABLE settings_weeder ENGINE=MyISAM;
ALTER TABLE settings_x10cmd ENGINE=MyISAM;
ALTER TABLE settings_xbmcxpl ENGINE=MyISAM;
ALTER TABLE settings_xmlrpc ENGINE=MyISAM;
ALTER TABLE settings_xpl ENGINE=MyISAM;
ALTER TABLE settings_youless ENGINE=MyISAM;
ALTER TABLE stock ENGINE=MyISAM;
ALTER TABLE thermostat_constant ENGINE=MyISAM;
ALTER TABLE thermostat_heating ENGINE=MyISAM;
ALTER TABLE thermostat_scenarii ENGINE=MyISAM;
ALTER TABLE thermostat_schedule ENGINE=MyISAM;
ALTER TABLE thermostat_schedule_entry ENGINE=MyISAM;
ALTER TABLE trafficfeeds ENGINE=MyISAM;
ALTER TABLE triggers ENGINE=MyISAM;
ALTER TABLE tv_categories ENGINE=MyISAM;
ALTER TABLE tv_channels ENGINE=MyISAM;
ALTER TABLE tv_programs ENGINE=MyISAM;
ALTER TABLE tv_subcategories ENGINE=MyISAM;
ALTER TABLE users ENGINE=MyISAM;
ALTER TABLE version ENGINE=MyISAM;
ALTER TABLE water_usage ENGINE=MyISAM;
ALTER TABLE weather ENGINE=MyISAM;
ALTER TABLE weatherfeeds ENGINE=MyISAM;
ALTER TABLE settings_arduino ENGINE=MyISAM;

--
-- Change all IDs to int(11)
--
ALTER TABLE `actions` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `calendar` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `capture_camera0` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `capture_camera1` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `capture_camera2` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `capture_camera3` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `category` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `cdr` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `conditions` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `contacts` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `deviceblacklist` CHANGE COLUMN `blid` `blid` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `devices` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `devices_bwired` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `devices_camera` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `devices_pachube` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `devices_zwave` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `devicetypes` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `events` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `gas_usage` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `globalvars` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `graphs` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `groups` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `interfaces` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `locations` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `macros` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `markers` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `menu` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `newsfeeds` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `notify` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `power_exported` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `power_usage` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `remarks_fullmoon` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `remarks_humid` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `remarks_personal` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `remarks_plants` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `remarks_tags` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `remarks_tempbelow5` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `remarks_tempbelowmin5` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `scenes` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `settings_serverstats` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `thermostat_constant` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `thermostat_heating` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `thermostat_scenarii` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `thermostat_schedule` CHANGE COLUMN `scenario` `scenario` INT(11) UNSIGNED NOT NULL;
ALTER TABLE `thermostat_schedule` CHANGE COLUMN `heating` `heating` INT(11) UNSIGNED NOT NULL;
ALTER TABLE `thermostat_schedule_entry` CHANGE COLUMN `scenario` `scenario` INT(11) UNSIGNED NOT NULL;
ALTER TABLE `thermostat_schedule_entry` CHANGE COLUMN `heating` `heating` INT(11) UNSIGNED NOT NULL;
ALTER TABLE `trafficfeeds` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `triggers` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `users` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `version` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `water_usage` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `weather` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `weatherfeeds` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `events_actions` CHANGE COLUMN `event` `event` INT(11) UNSIGNED NOT NULL;
ALTER TABLE `events_actions` CHANGE COLUMN `action` `action` INT(11) UNSIGNED NOT NULL;
ALTER TABLE `floors` CHANGE COLUMN `floor` `floor` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `thermostat_heating` CHANGE COLUMN `sensor` `sensor` INT(11) UNSIGNED NOT NULL;
ALTER TABLE `thermostat_heating` CHANGE COLUMN `device` `device` INT(11) UNSIGNED DEFAULT NULL;
ALTER TABLE `thermostat_heating` CHANGE COLUMN `regulator` `regulator` INT(11) UNSIGNED DEFAULT NULL;
ALTER TABLE `thermostat_schedule_entry` CHANGE COLUMN `constant` `constant` INT(11) UNSIGNED NOT NULL;
ALTER TABLE `notifytypes` CHANGE COLUMN `type` `type` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `stock` CHANGE COLUMN `stockid` `stockid` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `graph_data` CHANGE COLUMN `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `graph_data` CHANGE COLUMN `graph_id` `graph_id` INT(11) UNSIGNED NOT NULL;

--
-- Modify contacts table
--
ALTER TABLE contacts MODIFY name varchar(64);
ALTER TABLE contacts MODIFY cidphone varchar(64);
ALTER TABLE contacts MODIFY cidmobile varchar(64);

--
-- Fix inconsistences between domotiga.sql and domotiga-empty.sql
--
ALTER TABLE devices MODIFY name varchar(64);
ALTER TABLE devicetypes MODIFY name varchar(64);

--
-- Finally update to 1.0.014
--
LOCK TABLES version WRITE;
INSERT INTO version VALUES (59,'1.0.014');
UNLOCK TABLES;

